
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{sulkava\_seating}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \hypertarget{background}{%
\subsubsection{background}\label{background}}

I have a list of N people who need to be seated in a boat in N seats.
Boat has one cox, and 7 pairs of rowers. N = 15. People need to be
matched by weight, such that the boat is balanced in terms of roll and
pitch
(https://commons.wikimedia.org/wiki/File:Rotations.png\#/media/File:Rotations.png)
and by height, so that people have neighbours of similar heights (to
make rowing as a unit easier). People also have preferences: * To cox or
not to cox. * Sit in the front/back/middle of the boat. NB: height makes
it uncomfortable for tall people to sit in the first or last row. * In
case of switching, some people would like to switch sides. Switching. in
total there are 4 seating plans to make, since seating will be switched
4 times throughout the race (see last point in preferences).

\hypertarget{solution}{%
\subsubsection{solution}\label{solution}}

it can be seen as a variant of a stable-marriage problem
(https://en.wikipedia.org/wiki/Stable\_marriage\_problem). SMP is the
problem of finding a stable matching between two equally sized sets of
elements given an ordering of preferences for each element. There are
two differences: * it is unidirectional (so rowers \emph{prefer} sits,
but sits \emph{do not prefer} rowers). * it is with indifference, so it
needs not to exist a strict order of preferences, e.g.~top 3 sits are
given, rest is of equal priority. see
https://en.wikipedia.org/wiki/Stable\_marriage\_with\_indifference

the assignment problem might be good to look into, if we are able to
translate weight/height matches into some edge weights. The assignment
problem consists of finding, in a weighted bipartite graph, a matching
in which the sum of weights of the edges is as large as possible. A
common variant consists of finding a minimum-weight perfect matching.
see https://en.wikipedia.org/wiki/Assignment\_problem

\hypertarget{for-netpharmed}{%
\paragraph{for NetPharMed:}\label{for-netpharmed}}

There is an implementation of a classical bidirectional aglo implemented
as Matcher() below. It matches rowers with seats. From the point of view
of a rower, it is truthful, ie no better seating can be achieved by
misinforming the preferences. To adapt it for office seating, make all
the sits have identical preferences for rowers. That can also be used in
the git manual, to make people branch the file, input their preferences,
and then submit a pull request.

\hypertarget{for-sulkava}{%
\paragraph{for Sulkava:}\label{for-sulkava}}

how to make matching by weight/height happen? One idea is to use
simulated annealing. SA is an optimization technique to find a global
optimum of a function, esp when the search space is discrete. For
problems where finding an \emph{approximate global optimum} is more
important than finding a \emph{precise local optimum in a fixed amount
of time}, simulated annealing may be preferable to alternatives such as
gradient descent. The notion of slow cooling (from metallurgy)
implemented in the simulated annealing algorithm is interpreted as a
slow decrease in the probability of accepting worse solutions as the
solution space is explored. At each time step, the algorithm randomly
selects a solution close to the current one, measures its quality, and
then decides to move to it or to stay with the current solution based on
either one of two probabilities between which it chooses on the basis of
the fact that the new solution is better or worse than the current one.
During the search, the temperature is progressively decreased from an
initial positive value to zero and affects the two probabilities: at
each step, the probability of moving to a better new solution is either
kept to 1 or is changed towards a positive value; on the other hand, the
probability of moving to a worse new solution is progressively changed
towards zero. Here it is in gif form:
https://commons.wikimedia.org/wiki/File:Hill\_Climbing\_with\_Simulated\_Annealing.gif\#/media/File:Hill\_Climbing\_with\_Simulated\_Annealing.gif

Here is the implementation of SA for wedding table seating (where there
are N tables for P people, each table sits M people, match people's
preferences so that they do not sit with those they hate, and tend to
preserve their groups of friends.
https://lukeplant.me.uk/blog/posts/wedding-hacks---seating-planner-using-simulated-annealing/
The idea is that you define a matrix of connections, with a zero
indicating that the people don't know each other, 1 that they do know
each other, plus 50 indicating that they must be together, and negative
numbers for people who should be kept apart! Here is an alternative to
it: http://linanqiu.github.io/2018/03/05/Wedding-Seat-Optimization/ with
a Jup notebook
https://github.com/linanqiu/wedding-optimization-simulated-annealing/blob/master/wedding-optimization.ipynb
and another
https://github.com/zneedell/seating\_optimization/blob/master/main.ipynb

Here is a different solution of the wedding seat solved using
hypergraphs. We model it as a hypergraph partitioning problem and
solving it with KaHyPar (http://kahypar.org/ /
http://github.com/SebastianSchlag/kahypar). Every guest is represented
by a node and weighted hyperedges express relationships (a couple and
their kids, extended family, friends, acquaintances, etc). The goal is
to partition the hypergraph into (roughly) equal-sized parts (i.e.,
tables) while minimising the sum of weights of cut hyperedges (``Î»-1
metric''). It's simple enough to model and took a few milliseconds to
solve :) He ended up actually using the resulting assignment and was
really happy with it.

This is a solution using simple linear programming
https://stackoverflow.com/questions/19143474/which-algorithm-could-solve-my-wedding-table-issue
but without code.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}118}]:} \PY{c+c1}{\PYZsh{} refer to gale\PYZhy{}shapley 1962 paper for the original algo}
          
          \PY{k+kn}{from} \PY{n+nn}{collections} \PY{k}{import} \PY{n}{defaultdict}
          
          
          \PY{k}{class} \PY{n+nc}{Matcher}\PY{p}{:}
          
              \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}init\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{rowers}\PY{p}{,} \PY{n}{sits}\PY{p}{,} \PY{n}{forbidden}\PY{p}{)}\PY{p}{:}
                  \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
          \PY{l+s+sd}{        Constructs a Matcher instance.}
          \PY{l+s+sd}{        Takes a dict of rowers\PYZsq{}s sittings preferences, `rowers`,}
          \PY{l+s+sd}{        a dict of special sits to be allocated e.g. white oars, `sits`,}
          \PY{l+s+sd}{        and a dict specifying which sittings are forbidden}
          \PY{l+s+sd}{        for each rower:}
          \PY{l+s+sd}{        \PYZgt{}\PYZgt{}\PYZgt{} forbidden = \PYZob{} \PYZsq{}name\PYZsq{}: [\PYZsq{}3\PYZsq{}, \PYZsq{}4\PYZsq{}, ... ] \PYZcb{}}
          \PY{l+s+sd}{        \PYZsq{}\PYZsq{}\PYZsq{}}
                  \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{R} \PY{o}{=} \PY{n}{rowers}
                  \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{S} \PY{o}{=} \PY{n}{sits}
                  \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{forbidden} \PY{o}{=} \PY{n}{forbidden}
                  \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{sittings} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}
                  \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{pairs} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          
                  \PY{c+c1}{\PYZsh{} we rank sitting preferences at initialization }
                  \PY{c+c1}{\PYZsh{} to avoid expensive lookups when matching}
                  \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rrank} \PY{o}{=} \PY{n}{defaultdict}\PY{p}{(}\PY{n+nb}{dict}\PY{p}{)}  \PY{c+c1}{\PYZsh{} `rrank[r][s]` is r\PYZsq{}s ranking of s}
                  \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{srank} \PY{o}{=} \PY{n}{defaultdict}\PY{p}{(}\PY{n+nb}{dict}\PY{p}{)}  \PY{c+c1}{\PYZsh{} `srank[s][r]` is s\PYZsq{}s ranking of r}
          
                  \PY{k}{for} \PY{n}{r}\PY{p}{,} \PY{n}{prefs} \PY{o+ow}{in} \PY{n}{rowers}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                      \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{s} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{prefs}\PY{p}{)}\PY{p}{:}
                          \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rrank}\PY{p}{[}\PY{n}{r}\PY{p}{]}\PY{p}{[}\PY{n}{s}\PY{p}{]} \PY{o}{=} \PY{n}{i}
          
                  \PY{k}{for} \PY{n}{s}\PY{p}{,} \PY{n}{prefs} \PY{o+ow}{in} \PY{n}{sits}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                      \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{r} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{prefs}\PY{p}{)}\PY{p}{:}
                          \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{srank}\PY{p}{[}\PY{n}{s}\PY{p}{]}\PY{p}{[}\PY{n}{r}\PY{p}{]} \PY{o}{=} \PY{n}{i}
          
              \PY{k}{def} \PY{n+nf}{\PYZus{}\PYZus{}call\PYZus{}\PYZus{}}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{)}\PY{p}{:}
                  \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{match}\PY{p}{(}\PY{p}{)}
          
              \PY{k}{def} \PY{n+nf}{prefers}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{s}\PY{p}{,} \PY{n}{r}\PY{p}{,} \PY{n}{h}\PY{p}{)}\PY{p}{:}
                  \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
          \PY{l+s+sd}{        Test whether s prefers r over h.}
          \PY{l+s+sd}{        \PYZsq{}\PYZsq{}\PYZsq{}}
                  \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{srank}\PY{p}{[}\PY{n}{s}\PY{p}{]}\PY{p}{[}\PY{n}{r}\PY{p}{]} \PY{o}{\PYZlt{}} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{srank}\PY{p}{[}\PY{n}{s}\PY{p}{]}\PY{p}{[}\PY{n}{h}\PY{p}{]}
          
              \PY{k}{def} \PY{n+nf}{is\PYZus{}forbidden}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{r}\PY{p}{,} \PY{n}{s}\PY{p}{)}\PY{p}{:}
                  \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
          \PY{l+s+sd}{        Test whether (r, s) is a forbidden pairing.}
          \PY{l+s+sd}{        \PYZsq{}\PYZsq{}\PYZsq{}}
                  \PY{k}{return} \PY{n}{s} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{forbidden}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{r}\PY{p}{,} \PY{p}{[}\PY{p}{]}\PY{p}{)}
          
              \PY{k}{def} \PY{n+nf}{after}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{r}\PY{p}{,} \PY{n}{s}\PY{p}{)}\PY{p}{:}
                  \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
          \PY{l+s+sd}{        Return the sit favored by r after s.}
          \PY{l+s+sd}{        }
          \PY{l+s+sd}{        \PYZsq{}\PYZsq{}\PYZsq{}}
                  \PY{n}{prefs} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{R}\PY{p}{[}\PY{n}{r}\PY{p}{]}               \PY{c+c1}{\PYZsh{} r\PYZsq{}s ordered list of preferences}
                  \PY{n}{i} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{rrank}\PY{p}{[}\PY{n}{r}\PY{p}{]}\PY{p}{[}\PY{n}{s}\PY{p}{]} \PY{o}{+} \PY{l+m+mi}{1}        \PY{c+c1}{\PYZsh{} index of sits following s in list of prefs}
                  \PY{k}{if} \PY{n}{i} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{prefs}\PY{p}{)}\PY{p}{:}
                      \PY{k}{return} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}                   \PY{c+c1}{\PYZsh{} no more sits left!}
                  \PY{n}{s} \PY{o}{=} \PY{n}{prefs}\PY{p}{[}\PY{n}{i}\PY{p}{]}                    \PY{c+c1}{\PYZsh{} sit following s in list of prefs}
                  \PY{k}{if} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{is\PYZus{}forbidden}\PY{p}{(}\PY{n}{r}\PY{p}{,} \PY{n}{s}\PY{p}{)}\PY{p}{:}     \PY{c+c1}{\PYZsh{} if r, s) is forbidden}
                      \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{after}\PY{p}{(}\PY{n}{r}\PY{p}{,} \PY{n}{s}\PY{p}{)}     \PY{c+c1}{\PYZsh{} try next w }
                  \PY{k}{return} \PY{n}{s}
          
              \PY{k}{def} \PY{n+nf}{match}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{rowers}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n+nb}{next}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{sittings}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
                  \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
          \PY{l+s+sd}{        Try to match all rowers with their next preferred sit.}
          \PY{l+s+sd}{        }
          \PY{l+s+sd}{        \PYZsq{}\PYZsq{}\PYZsq{}}
                  \PY{k}{if} \PY{n}{rowers} \PY{o+ow}{is} \PY{k+kc}{None}\PY{p}{:} 
                      \PY{n}{rowers} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{R}\PY{p}{)}         \PY{c+c1}{\PYZsh{} get the complete list of rowers}
                  \PY{k}{if} \PY{n+nb}{next} \PY{o+ow}{is} \PY{k+kc}{None}\PY{p}{:} 
                      \PY{c+c1}{\PYZsh{} if not defined, map each rower to their first preference}
                      \PY{n+nb}{next} \PY{o}{=} \PY{n+nb}{dict}\PY{p}{(}\PY{p}{(}\PY{n}{r}\PY{p}{,} \PY{n}{rank}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{r}\PY{p}{,} \PY{n}{rank} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{R}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{)} 
                  \PY{k}{if} \PY{n}{sittings} \PY{o+ow}{is} \PY{k+kc}{None}\PY{p}{:} 
                      \PY{n}{sittings} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}                  \PY{c+c1}{\PYZsh{} mapping from sit to current sitting}
                  \PY{k}{if} \PY{o+ow}{not} \PY{n+nb}{len}\PY{p}{(}\PY{n}{rowers}\PY{p}{)}\PY{p}{:} 
                      \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{pairs} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{n}{h}\PY{p}{,} \PY{n}{s}\PY{p}{)} \PY{k}{for} \PY{n}{s}\PY{p}{,} \PY{n}{h} \PY{o+ow}{in} \PY{n}{sittings}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{]}
                      \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{sittings} \PY{o}{=} \PY{n}{sittings}
                      \PY{k}{return} \PY{n}{sittings}
                  \PY{n}{r}\PY{p}{,} \PY{n}{rowers} \PY{o}{=} \PY{n}{rowers}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{rowers}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{:}\PY{p}{]}
                  \PY{n}{s} \PY{o}{=} \PY{n+nb}{next}\PY{p}{[}\PY{n}{r}\PY{p}{]}                     \PY{c+c1}{\PYZsh{} next sit for m to choose}
                  \PY{k}{if} \PY{o+ow}{not} \PY{n}{s}\PY{p}{:}                       \PY{c+c1}{\PYZsh{} continue if no sit to choose}
                      \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{match}\PY{p}{(}\PY{n}{rowers}\PY{p}{,} \PY{n+nb}{next}\PY{p}{,} \PY{n}{sittings}\PY{p}{)}
                  \PY{n+nb}{next}\PY{p}{[}\PY{n}{r}\PY{p}{]} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{after}\PY{p}{(}\PY{n}{r}\PY{p}{,} \PY{n}{s}\PY{p}{)}      \PY{c+c1}{\PYZsh{} sit after s in r\PYZsq{}s list of prefs}
                  \PY{k}{if} \PY{n}{s} \PY{o+ow}{in} \PY{n}{sittings}\PY{p}{:}
                      \PY{n}{h} \PY{o}{=} \PY{n}{sittings}\PY{p}{[}\PY{n}{s}\PY{p}{]}                \PY{c+c1}{\PYZsh{} current sitting}
                      \PY{k}{if} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{prefers}\PY{p}{(}\PY{n}{s}\PY{p}{,} \PY{n}{r}\PY{p}{,} \PY{n}{h}\PY{p}{)}\PY{p}{:}
                          \PY{n}{rowers}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{h}\PY{p}{)}           \PY{c+c1}{\PYZsh{} sit becomes available again}
                          \PY{n}{sittings}\PY{p}{[}\PY{n}{s}\PY{p}{]} \PY{o}{=} \PY{n}{r}            \PY{c+c1}{\PYZsh{} s becomes sit for r}
                      \PY{k}{else}\PY{p}{:}
                          \PY{n}{rowers}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{r}\PY{p}{)}           \PY{c+c1}{\PYZsh{} r remains unsitted}
                  \PY{k}{else}\PY{p}{:}
                      \PY{n}{sittings}\PY{p}{[}\PY{n}{s}\PY{p}{]} \PY{o}{=} \PY{n}{r}                \PY{c+c1}{\PYZsh{} s becomes s for r}
                  \PY{k}{return} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{match}\PY{p}{(}\PY{n}{rowers}\PY{p}{,} \PY{n+nb}{next}\PY{p}{,} \PY{n}{sittings}\PY{p}{)}
          
              \PY{k}{def} \PY{n+nf}{is\PYZus{}stable}\PY{p}{(}\PY{n+nb+bp}{self}\PY{p}{,} \PY{n}{sittings}\PY{o}{=}\PY{k+kc}{None}\PY{p}{,} \PY{n}{verbose}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}\PY{p}{:}
                  \PY{k}{if} \PY{n}{sittings} \PY{o+ow}{is} \PY{k+kc}{None}\PY{p}{:}
                      \PY{n}{sittings} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{sittings}
                  \PY{k}{for} \PY{n}{s}\PY{p}{,} \PY{n}{r} \PY{o+ow}{in} \PY{n}{sittings}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                      \PY{n}{i} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{R}\PY{p}{[}\PY{n}{r}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{s}\PY{p}{)}
                      \PY{n}{preferred} \PY{o}{=} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{R}\PY{p}{[}\PY{n}{r}\PY{p}{]}\PY{p}{[}\PY{p}{:}\PY{n}{i}\PY{p}{]}
                      \PY{k}{for} \PY{n}{p} \PY{o+ow}{in} \PY{n}{preferred}\PY{p}{:}
                          \PY{k}{if} \PY{n}{p} \PY{o+ow}{in} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{forbidden}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{n}{r}\PY{p}{,} \PY{p}{[}\PY{p}{]}\PY{p}{)}\PY{p}{:}  \PY{c+c1}{\PYZsh{} no need to worry about}
                              \PY{k}{continue}                        \PY{c+c1}{\PYZsh{} forbidden configs}
                          \PY{k}{if} \PY{o+ow}{not} \PY{n}{p} \PY{o+ow}{in} \PY{n}{sittings}\PY{p}{:}
                              \PY{k}{continue}
                          \PY{n}{h} \PY{o}{=} \PY{n}{sittings}\PY{p}{[}\PY{n}{p}\PY{p}{]}
                          \PY{k}{if} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{S}\PY{p}{[}\PY{n}{p}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{r}\PY{p}{)} \PY{o}{\PYZlt{}} \PY{n+nb+bp}{self}\PY{o}{.}\PY{n}{S}\PY{p}{[}\PY{n}{p}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{h}\PY{p}{)}\PY{p}{:}  
                              \PY{n}{msg} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s sitting to }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{ is unstable: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PYZbs{}
                                    \PY{l+s+s2}{\PYZdq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{ prefers }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{ over }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{ and }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{ prefers }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PYZbs{}
                                    \PY{l+s+s2}{\PYZdq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{ over the current sitting }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}
                              \PY{k}{if} \PY{n}{verbose}\PY{p}{:}
                                  \PY{n+nb}{print}\PY{p}{(}\PY{n}{msg}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{r}\PY{p}{,} \PY{n}{s}\PY{p}{,} \PY{n}{r}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{s}\PY{p}{,} \PY{n}{p}\PY{p}{,} \PY{n}{r}\PY{p}{,} \PY{n}{h}\PY{p}{)}\PY{p}{)}
                              \PY{k}{return} \PY{k+kc}{False}
                  \PY{k}{return} \PY{k+kc}{True}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}119}]:} \PY{c+c1}{\PYZsh{} rowers is just people with their sit preferences}
          \PY{n}{rowers} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{tiia: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15; alison: 1, 2, 3, 4, 5, 10, 11, 12, 13, 6, 7, 8, 9, 14, 15; bulat: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15; arvydas: 1, 2, 3, 13, 14, 15, 4, 5, 6, 7, 8, 9, 10, 11, 12; julia: 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1, 2, 3, 4, 5; lauri: 1, 2, 10, 11, 12, 3, 4, 5, 6, 7, 8, 9, 13, 14, 15; tatiana: 5, 6, 7, 8, 9, 10, 11, 12, 13, 1, 2, 3, 4, 14, 15; ulrika: 7, 8, 9, 10, 11, 12, 13, 1, 2, 3, 4, 5, 6, 14, 15; karen: 11, 12, 13, 14, 15, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10; hans: 11, 12, 13, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 14, 15; jaana: 9, 10, 11, 1, 2, 3, 4, 5, 6, 7, 8, 12, 13, 14, 15; joseph: 1, 2, 11, 12, 13, 14, 15, 3, 4, 5, 6, 7, 8, 9, 10; elli: 9, 10, 11, 12, 13, 14, 15, 1, 2, 3, 4, 5, 6, 7, 8; elina: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15; kul: 12, 13, 14, 15, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11}\PY{l+s+s2}{\PYZdq{}}
                                              
          \PY{c+c1}{\PYZsh{} sits is                                     }
          \PY{n}{sits} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{1: tiia, alison, bulat, arvydas, julia, lauri, tatiana, ulrika, karen, hans, jaana, joseph, elli, elina, kul; 2: tiia, alison, julia, lauri, bulat, arvydas, tatiana, ulrika, karen, hans, jaana, joseph, elli, elina, kul; 3: lauri, bulat, arvydas, tatiana, ulrika, tiia, alison, julia, karen, hans, jaana, joseph, elli, elina, kul; 4: jaana, joseph, elli, elina, kul, lauri, bulat, arvydas, tatiana, ulrika, tiia, alison, julia, karen, hans; 5: arvydas, tatiana, ulrika, tiia, alison, julia, karen, hans, jaana, joseph, elli, elina, kul, lauri, bulat; 6: arvydas, alison, julia, karen, hans, jaana, tatiana, ulrika, tiia, joseph, elli, elina, kul, lauri, bulat; 7: ulrika, tiia, joseph, elli, elina, kul, lauri, bulat, arvydas, alison, julia, karen, hans, jaana, tatiana; 8: lauri, bulat, arvydas, ulrika, tiia, joseph, elli, elina, kul, alison, julia, karen, hans, jaana, tatiana; 9: elina, kul, alison, julia, karen, lauri, bulat, arvydas, ulrika, tiia, joseph, elli, hans, jaana, tatiana; 10: elina, kul, alison, julia, karen, lauri, hans, jaana, tatiana, bulat, arvydas, ulrika, tiia, joseph, elli; 11: tatiana, bulat, arvydas, ulrika, tiia, joseph, elli, elina, kul, alison, julia, karen, lauri, hans, jaana; 12: tatiana, bulat, arvydas, elli, elina, kul, ulrika, tiia, joseph, alison, julia, karen, lauri, hans, jaana; 13: bulat, arvydas, alison, julia, karen, hans, jaana, tatiana, ulrika, tiia, joseph, elli, elina, kul, lauri; 14: joseph, elli, elina, kul, lauri, bulat, arvydas, alison, julia, karen, hans, jaana, tatiana, ulrika, tiia; 15: joseph, kul, elli, elina, lauri, bulat, arvydas, alison, julia, karen, hans, jaana, tatiana, ulrika, tiia}\PY{l+s+s2}{\PYZdq{}}
          
          \PY{n}{forbidden} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{1: jaana, joseph; 2: joseph, elli; 3: elli, elina; 4: elina, kul; 5: kul, tiia; 6: tiia, alison; 7: alison, bulat; 8: bulat, arvydas; 9: arvydas, julia; 10: julia, lauri; 11: lauri, tatiana; 12: tatiana, ulrika; 13: ulrika, karen; 14: karen, hans; 15: hans, jaana}\PY{l+s+s2}{\PYZdq{}}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}120}]:} \PY{k}{def} \PY{n+nf}{dictor}\PY{p}{(}\PY{n}{s}\PY{p}{)}\PY{p}{:}
              \PY{l+s+sd}{\PYZsq{}\PYZsq{}\PYZsq{}}
          \PY{l+s+sd}{    returns a dict from a string. Given in the following format}
          \PY{l+s+sd}{    name0: preference0, preferenceN; nameK: preference0, preferenceN;}
          \PY{l+s+sd}{    \PYZsq{}\PYZsq{}\PYZsq{}}
              \PY{k}{return} \PY{n+nb}{dict}\PY{p}{(}\PY{p}{(}\PY{n}{k}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{v}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{replace}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{,}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{p}{)}\PY{p}{)} \PY{k}{for} \PY{n}{k}\PY{p}{,}\PY{n}{v} \PY{o+ow}{in} \PY{p}{(}\PY{n}{item}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{:}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{for} \PY{n}{item} \PY{o+ow}{in} \PY{n}{s}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{;}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}121}]:} \PY{n}{r} \PY{o}{=} \PY{n}{dictor}\PY{p}{(}\PY{n}{rowers}\PY{p}{)}
          \PY{n}{s} \PY{o}{=} \PY{n}{dictor}\PY{p}{(}\PY{n}{sits}\PY{p}{)}
          \PY{n}{f} \PY{o}{=} \PY{n}{dictor}\PY{p}{(}\PY{n}{forbidden}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}122}]:} \PY{n}{out} \PY{o}{=} \PY{n}{Matcher}\PY{p}{(}\PY{n}{r}\PY{p}{,} \PY{n}{s}\PY{p}{,} \PY{n}{f}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}123}]:} \PY{n}{out}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}123}]:} \{'1': 'tiia',
           '6': 'julia',
           '5': 'tatiana',
           '7': 'ulrika',
           '11': 'joseph',
           '9': 'elli',
           '12': 'kul',
           '2': 'alison',
           '10': 'lauri',
           '3': 'bulat',
           '13': 'arvydas',
           '4': 'jaana',
           '14': 'karen',
           '8': 'elina',
           '15': 'hans'\}
\end{Verbatim}
            

    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
